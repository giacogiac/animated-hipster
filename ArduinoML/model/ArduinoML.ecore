<?xml version="1.0" encoding="UTF-8"?>
<ecore:EPackage xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" name="arduinoml" nsURI="http://arduinoml/1.0" nsPrefix="arduinoml">
  <eAnnotations source="http://www.eclipse.org/OCL/Import">
    <details key="ecore" value="http://www.eclipse.org/emf/2002/Ecore#/"/>
  </eAnnotations>
  <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
    <details key="invocationDelegates" value="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot"/>
    <details key="settingDelegates" value="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot"/>
    <details key="validationDelegates" value="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot"/>
  </eAnnotations>
  <eClassifiers xsi:type="ecore:EEnum" name="DigitalBrickState">
    <eLiterals name="OFF"/>
    <eLiterals name="ON" value="1"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="AMLMachine">
    <eStructuralFeatures xsi:type="ecore:EReference" name="bricks" upperBound="-1"
        eType="#//Brick" containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="states" lowerBound="1"
        upperBound="-1" eType="#//AMLState" containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="start" lowerBound="1" eType="#//AMLState"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="frequency" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="AMLState" eSuperTypes="#//NamedElement">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="UniqueActionBrick"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="UniqueActionBrick" value="&#xA;&#x9;&#x9;&#x9;actions->isUnique(a | a.actuator.pin)"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="transitions" upperBound="-1"
        eType="#//Transition" containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="actions" upperBound="-1"
        eType="#//DigitalAction" containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Brick" abstract="true" eSuperTypes="#//NamedElement">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="PinNumber UniquePin"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="PinNumber" value="&#xA;&#x9;&#x9;&#x9;self.pin >= 8 and self.pin &lt;= 12"/>
      <details key="UniquePin" value="&#xA;&#x9;&#x9;&#x9;Brick.allInstances()->one(b | b.pin = self.pin)"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="pin" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Sensor" eSuperTypes="#//Brick"/>
  <eClassifiers xsi:type="ecore:EClass" name="Actuator" eSuperTypes="#//Brick"/>
  <eClassifiers xsi:type="ecore:EClass" name="Transition">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="UniqueDigitalConditionBrick InvalidTimeConditions"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="UniqueDigitalConditionBrick" value="&#xA;&#x9;&#x9;&#x9;conditions->select(c | c.oclIsTypeOf(DigitalSensorCondition))->isUnique(dsc : DigitalSensorCondition | dsc.sensor.pin)"/>
      <details key="InvalidTimeConditions" value="&#xA;&#x9;&#x9;&#x9;getTimeConditions()->size() &lt;= 1&#xA;&#x9;&#x9;&#x9;or (getTimeConditions()->size() = 2&#xA;&#x9;&#x9;&#x9;and getTimeConditions()->one(tc : TimeCondition | tc.tComp = Comparison::SUPERIOR)&#xA;&#x9;&#x9;&#x9;and getTimeConditions()->one(tc : TimeCondition | tc.tComp = Comparison::INFERIOR)&#xA;&#x9;&#x9;&#x9;and getTimeConditions()->select(tc : TimeCondition | tc.tComp = Comparison::SUPERIOR)->first().time&#xA;&#x9;&#x9;&#x9;&#x9;&lt; getTimeConditions()->select(tc : TimeCondition | tc.tComp = Comparison::INFERIOR)->first().time)"/>
    </eAnnotations>
    <eOperations name="getTimeConditions" unique="false" upperBound="-1" eType="#//TimeCondition">
      <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
        <details key="body" value="conditions->select(c | c.oclIsTypeOf(TimeCondition))->asSequence()"/>
      </eAnnotations>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="goto" lowerBound="1" eType="#//AMLState"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="conditions" lowerBound="1"
        upperBound="-1" eType="#//Condition" containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="DigitalSensorCondition" eSuperTypes="#//Condition">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="bState" lowerBound="1"
        eType="#//DigitalBrickState"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="sensor" lowerBound="1"
        eType="#//Sensor"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="DigitalAction">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="bState" lowerBound="1"
        eType="#//DigitalBrickState"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="actuator" lowerBound="1"
        eType="#//Actuator"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="NamedElement" abstract="true">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"
        iD="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Condition" abstract="true"/>
  <eClassifiers xsi:type="ecore:EClass" name="TimeCondition" eSuperTypes="#//Condition">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="TimeMustBePositive"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="TimeMustBePositive" value="&#xA;&#x9;&#x9;&#x9;self.time > 0"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="time" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="tComp" lowerBound="1" eType="#//Comparison"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="Comparison">
    <eLiterals name="SUPERIOR" value="1"/>
    <eLiterals name="INFERIOR"/>
    <eLiterals name="EQUAL" value="2"/>
  </eClassifiers>
</ecore:EPackage>
